<div class="page-content">
  <div class="page-content-col">
    <div class="row">
      <%= render partial: "pages/navigation" %>
      <p id="notice"><%= notice %></p>
      <h2>All Transactions</h2>
      <div class="col-md-9 col-md-offset-2">
        <div class="button-list">
          <table>
            <thead>
              <tr>
                <th>Transaction date</th>
                <th>Account</th>
                <th>Explanation</th>
                <th>Amount</th>
                <th>Related Account</th>
                <th>Category</th>
                <th colspan="1"></th>
              </tr>
            </thead>
            
            <tbody>
              <% @notes.each do |transaction| %>
                <tr>
                  <td><%= transaction.transaction_date.strftime("%m-%d-%Y") %></td>
                  <td><%= transaction.account.name %></td>
                  <td><%= transaction.explanation %></td>
                  <% if transaction.transaction_type == "Debit" %>
                    <td><%= link_to "- (#{number_to_currency(transaction.amount)})", transaction %></td>
                  <% else %>
                    <td><%= link_to "+ #{number_to_currency(transaction.amount)}", transaction %></td>
                  <% end %>
                  <% if transaction.related_account.present? %>
                    <td><%= transaction.related_account.name %></td>
                  <% else %>
                    <td>None</td>
                  <% end %>
                  <% if transaction.category.present? %>
                    <td><%= link_to "#{transaction.category.name}", transaction.category %></td>
                  <% else %>
                    <td>None</td>
                  <% end %>
                  <td>
                    <div class="btn-group pull-right">
                      <button class="btn blue btn-xs btn-outline dropdown-toggle" data-toggle="dropdown">Actions</button>
                      <ul class="dropdown-menu pull-right">
                        <li>
                          <%= link_to note_path(transaction) do %>
                              View
                          <% end %>
                        </li>
                        <li>
                          <%= link_to edit_note_path(transaction) do %>
                              Edit
                          <% end %>
                        </li>
                        <li>
                          <%= link_to transaction, method: :delete, data: { confirm: 'Are you sure?' } do %>
                              Delete
                          <% end %>
                        </li>
                      </ul>
                    </div>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
        <%= will_paginate @notes %>
      </div>
    </div>
  </div>
</div>